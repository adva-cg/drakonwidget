{"version":20180619,"tag":"584476490","params":"ctx\ntext\noptions","when_created":1667540023.7925,"parent_id":"99e62b4e","props":[],"when_updated":1668153971.7867,"items":{"37":{"type":"action","text":"lines = splitToTokensMarkdown(text)","one":"13","id":"37"},"31":{"type":"action","text":"block.width = Math.max(\n    calcLineWidth(line.tokens),\n    block.width\n)","one":"19","id":"31"},"5":{"flag1":0,"id":"5","type":"question","text":"options.singleLine","one":"36","two":"6"},"9":{"type":"action","text":"lines = wrapInLineObjects(\n    splitToTokens(text)\n)","one":"13","id":"9"},"36":{"type":"select","id":"36","one":"35","text":"options.textFormat"},"22":{"type":"loopend","text":"","one":"31","id":"22"},"32":{"type":"action","id":"32","one":"29","text":"block.width += (\n    options.paddingLeft + options.paddingRight\n)"},"6":{"type":"action","id":"6","one":"7","text":"line = splitLineToTokens(text, \"\")"},"23":{"type":"loopbegin","id":"23","one":"26","text":"token; line.tokens"},"38":{"type":"action","text":"lines = splitToTokensHtml(text)","one":"13","id":"38"},"7":{"type":"action","id":"7","one":"13","text":"lines = wrapInLineObjects([line])"},"18":{"type":"action","id":"18","one":"14","text":"block = {\n    width: 0,\n    options: options,\n    text: text,\n    lineHeight: options.lineHeight * fontObj\n    .size,\n    fontSize: fontObj.size,\n    lines: lines\n}"},"29":{"type":"action","id":"29","one":"1","text":"return block"},"13":{"branchId":2,"one":"16","id":"13","type":"branch","text":"Set font"},"14":{"branchId":3,"one":"20","id":"14","type":"branch","text":"Branch1"},"28":{"type":"action","id":"28","one":"24","text":"size = ctx.measureText(\" \")"},"34":{"one":"37","id":"34","type":"case","text":"\"markdown\"","two":"33"},"1":{"type":"end","id":"1"},"33":{"type":"case","one":"9","id":"33"},"24":{"type":"action","text":"token.width = size.width","one":"22","id":"24"},"15":{"one":"17","id":"15","type":"action","text":"setFontToTokens(lines, options.font, fontCache)","two":""},"16":{"one":"15","id":"16","type":"action","text":"fontCache = initFontCache()","two":""},"35":{"one":"38","id":"35","type":"case","two":"34","text":"\"html\""},"25":{"type":"action","id":"25","one":"24","text":"size = ctx.measureText(token.text)"},"12":{"branchId":4,"one":"32","id":"12","type":"branch","text":"Exit"},"19":{"type":"loopend","text":"","one":"12","id":"19"},"26":{"type":"action","text":"ctx.font = token.font","one":"27","id":"26"},"2":{"branchId":1,"one":"5","id":"2","type":"branch","text":"Lex"},"17":{"one":"18","id":"17","type":"action","two":"","text":"fontObj = parseCssFont(options.font, fontCache)"},"27":{"flag1":0,"id":"27","type":"question","two":"28","one":"25","text":"token.type === \"space\""},"20":{"type":"loopbegin","id":"20","one":"23","text":"line; lines"}},"keywords":{"scenario":false,"async":false,"export":true,"function":true,"algoprop":false},"language":"LANG_S42","type":"drakon","updated_by":"stipan","name":"createTextBlock","created_by":"stipan"}